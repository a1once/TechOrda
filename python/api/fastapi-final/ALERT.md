Настройка алертов в Grafana с отправкой уведомлений в Telegram
1. Создание Telegram-бота и получение API Token и Chat ID
В Telegram найдите бота @BotFather и отправьте команду /newbot. Следуйте инструкциям для создания бота. Сохраните выданный API Token.
Создайте новую группу в Telegram, добавьте в неё созданного бота и сделайте его администратором.
Добавьте в группу бота @getmyid_bot или @RawDataBot. Отправьте сообщение в группу, бот ответит с Chat ID. Сохраните его.
2. Настройка канала уведомлений в Grafana
В Grafana перейдите в Alerting → Contact points.
Нажмите New contact point и назовите его, например, Telegram Alerts.
В разделе Type выберите Telegram.
Укажите:
Bot API Token: ваш токен бота.
Chat ID: идентификатор группы.
Отключите опцию "Send 'resolved' notifications" (если не нужны уведомления об устранении проблемы).
Нажмите Save.
В Notification policies установите этот контакт по умолчанию или создайте правило для его использования.
3. Настройка алерта
Откройте нужный дэшборд и перейдите к панели, для которой требуется алерт.
Перейдите на вкладку Alert и нажмите Create Alert Rule.
Задайте условия срабатывания алерта (например, IS ABOVE 0 для метрики ошибок).
В разделе Notifications выберите созданный контакт Telegram Alerts.
Укажите сообщение оповещения при необходимости.
Нажмите Save.
4. Проверка работы алерта
Создайте ситуацию, при которой алерт должен сработать (например, сгенерируйте ошибки в приложении).
Убедитесь, что в Telegram-группу пришло уведомление от бота.